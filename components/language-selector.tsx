"use client";

import { useTranslations } from "next-intl";
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from "./ui/select";
import { useLanguageStore } from "@/lib/hooks/use-lang";
import { useRouter } from "next/navigation";
import { ISOLang } from "@/lib/types/lang";
import { useState } from "react";

const EmojiesByLang: Record<ISOLang, string> = {
  en: "üá∫üá∏", // Anglais (√âtats-Unis)
  fr: "üá´üá∑", // Fran√ßais (France)
  es: "üá™üá∏", // Espagnol (Espagne)
  de: "üá©üá™", // Allemand (Allemagne) 
  kr: "üá∞üá∑", // Cor√©en (Cor√©e du Sud)
  aa: "üá©üáØ", // Afar (Djibouti)
  ab: "üá¨üá™", // Abkhaze (G√©orgie)
  ae: "üáÆüá∑", // Avestique (Iran)
  af: "üáøüá¶", // Afrikaans (Afrique du Sud)
  ak: "üá¨üá≠", // Akan (Ghana)
  am: "üá™üáπ", // Amharique (√âthiopie)
  an: "üá™üá∏", // Aragonais (Espagne)
  ar: "üá∏üá¶", // Arabe (Arabie Saoudite)
  as: "üáÆüá≥", // Assamais (Inde)
  av: "üá∑üá∫", // Avar (Russie)
  ay: "üáßüá¥", // Aymara (Bolivie)
  az: "üá¶üáø", // Azerba√Ødjanais (Azerba√Ødjan)
  ba: "üá∑üá∫", // Bachkir (Russie)
  be: "üáßüáæ", // Bi√©lorusse (Bi√©lorussie)
  bg: "üáßüá¨", // Bulgare (Bulgarie)
  bh: "üáÆüá≥", // Bihari (Inde)
  bi: "üáªüá∫", // Bislama (Vanuatu)
  bm: "üá≤üá±", // Bambara (Mali)
  bn: "üáßüá©", // Bengali (Bangladesh)
  bo: "üá®üá≥", // Tib√©tain (Chine)
  br: "üá´üá∑", // Breton (France)
  bs: "üáßüá¶", // Bosniaque (Bosnie-Herz√©govine)
  ca: "üá¶üá©", // Catalan (Andorre)
  ce: "üá∑üá∫", // Tch√©tch√®ne (Russie)
  ch: "üá¨üá∫", // Chamorro (Guam)
  co: "üá´üá∑", // Corse (France)
  cr: "üá®üá¶", // Cree (Canada)
  cs: "üá®üáø", // Tch√®que (R√©publique tch√®que)
  cu: "üáßüá¨", // Vieux slave (Bulgarie)
  cv: "üá∑üá∫", // Tchouvache (Russie)
  cy: "üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø", // Gallois (Pays de Galles)
  da: "üá©üá∞", // Danois (Danemark)
  dv: "üá≤üáª", // Maldivien (Maldives)
  dz: "üáßüáπ", // Dzongkha (Bhoutan)
  ee: "üá¨üá≠", // √âw√© (Ghana)
  el: "üá¨üá∑", // Grec (Gr√®ce)
  eo: "üåç", // Esp√©ranto (International)
  et: "üá™üá™", // Estonien (Estonie)
  eu: "üá™üá∏", // Basque (Espagne)
  fa: "üáÆüá∑", // Persan (Iran)
  ff: "üá∏üá≥", // Peul (S√©n√©gal)
  fi: "üá´üáÆ", // Finnois (Finlande)
  fj: "üá´üáØ", // Fidjien (Fidji)
  fo: "üá´üá¥", // F√©ro√Øen (√éles F√©ro√©)
  fy: "üá≥üá±", // Frison (Pays-Bas)
  ga: "üáÆüá™", // Irlandais (Irlande)
  gd: "üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø", // Ga√©lique √©cossais (√âcosse)
  gl: "üá™üá∏", // Galicien (Espagne)
  gn: "üáµüáæ", // Guarani (Paraguay)
  gu: "üáÆüá≥", // Gujarati (Inde)
  gv: "üáÆüá≤", // Mannois (√éle de Man)
  ha: "üá≥üá¨", // Haoussa (Nigeria)
  he: "üáÆüá±", // H√©breu (Isra√´l)
  hi: "üáÆüá≥", // Hindi (Inde)
  ho: "üáµüá¨", // Hiri motu (Papouasie-Nouvelle-Guin√©e)
  hr: "üá≠üá∑", // Croate (Croatie)
  ht: "üá≠üáπ", // Cr√©ole ha√Øtien (Ha√Øti)
  hu: "üá≠üá∫", // Hongrois (Hongrie)
  hy: "üá¶üá≤", // Arm√©nien (Arm√©nie)
  hz: "üá≥üá¶", // Herero (Namibie)
  ia: "üåç", // Interlingua (International)
  id: "üáÆüá©", // Indon√©sien (Indon√©sie)
  ie: "üåç", // Interlingue (International)
  ig: "üá≥üá¨", // Igbo (Nigeria)
  ii: "üá®üá≥", // Yi (Chine)
  ik: "üá∫üá∏", // Inupiaq (√âtats-Unis/Alaska)
  io: "üåç", // Ido (International)
  is: "üáÆüá∏", // Islandais (Islande)
  it: "üáÆüáπ", // Italien (Italie)
  iu: "üá®üá¶", // Inuktitut (Canada)
  ja: "üáØüáµ", // Japonais (Japon)
  jv: "üáÆüá©", // Javanais (Indon√©sie)
  ka: "üá¨üá™", // G√©orgien (G√©orgie)
  kg: "üá®üá©", // Kongo (RD Congo)
  ki: "üá∞üá™", // Kikuyu (Kenya)
  kj: "üá≥üá¶", // Kuanyama (Namibie)
  kk: "üá∞üáø", // Kazakh (Kazakhstan)
  kl: "üá¨üá±", // Groenlandais (Groenland)
  km: "üá∞üá≠", // Khmer (Cambodge)
  kn: "üáÆüá≥", // Kannada (Inde)
  ko: "üá∞üá∑", // Cor√©en (Cor√©e du Sud)
  ks: "üáÆüá≥", // Cachemiri (Inde)
  ku: "üáÆüá∂", // Kurde (Irak)
  kv: "üá∑üá∫", // Komi (Russie)
  kw: "üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø", // Cornique (Angleterre)
  ky: "üá∞üá¨", // Kirghize (Kirghizistan)
  la: "üáªüá¶", // Latin (Vatican)
  lb: "üá±üá∫", // Luxembourgeois (Luxembourg)
  lg: "üá∫üá¨", // Ganda (Ouganda)
  li: "üá≥üá±", // Limbourgeois (Pays-Bas)
  ln: "üá®üá©", // Lingala (RD Congo)
  lo: "üá±üá¶", // Lao (Laos)
  lt: "üá±üáπ", // Lituanien (Lituanie)
  lu: "üá®üá©", // Luba-katanga (RD Congo)
  lv: "üá±üáª", // Letton (Lettonie)
  mg: "üá≤üá¨", // Malgache (Madagascar)
  mh: "üá≤üá≠", // Marshallais (√éles Marshall)
  mi: "üá≥üáø", // Maori (Nouvelle-Z√©lande)
  mk: "üá≤üá∞", // Mac√©donien (Mac√©doine du Nord)
  ml: "üáÆüá≥", // Malayalam (Inde)
  mn: "üá≤üá≥", // Mongol (Mongolie)
  mr: "üáÆüá≥", // Marathi (Inde)
  ms: "üá≤üáæ", // Malais (Malaisie)
  mt: "üá≤üáπ", // Maltais (Malte)
  my: "üá≤üá≤", // Birman (Myanmar)
  na: "üá≥üá∑", // Nauruan (Nauru)
  nb: "üá≥üá¥", // Norv√©gien bokm√•l (Norv√®ge)
  nd: "üáøüáº", // Nd√©b√©l√© du Nord (Zimbabwe)
  ne: "üá≥üáµ", // N√©palais (N√©pal)
  ng: "üá≥üá¶", // Ndonga (Namibie)
  nl: "üá≥üá±", // N√©erlandais (Pays-Bas)
  nn: "üá≥üá¥", // Norv√©gien nynorsk (Norv√®ge)
  no: "üá≥üá¥", // Norv√©gien (Norv√®ge)
  nr: "üáøüá¶", // Nd√©b√©l√© du Sud (Afrique du Sud)
  nv: "üá∫üá∏", // Navajo (√âtats-Unis)
  ny: "üá≤üáº", // Chichewa (Malawi)
  oc: "üá´üá∑", // Occitan (France)
  oj: "üá®üá¶", // Ojibwa (Canada)
  om: "üá™üáπ", // Oromo (√âthiopie)
  or: "üáÆüá≥", // Odia (Inde)
  os: "üá¨üá™", // Oss√®te (G√©orgie)
  pa: "üáÆüá≥", // Pendjabi (Inde)
  pi: "üáÆüá≥", // Pali (Inde)
  pl: "üáµüá±", // Polonais (Pologne)
  ps: "üá¶üá´", // Pachto (Afghanistan)
  pt: "üáµüáπ", // Portugais (Portugal)
  qu: "üáµüá™", // Quechua (P√©rou)
  rm: "üá®üá≠", // Romanche (Suisse)
  rn: "üáßüáÆ", // Kirundi (Burundi)
  ro: "üá∑üá¥", // Roumain (Roumanie)
  ru: "üá∑üá∫", // Russe (Russie)
  rw: "üá∑üáº", // Kinyarwanda (Rwanda)
  sa: "üáÆüá≥", // Sanskrit (Inde)
  sc: "üáÆüáπ", // Sarde (Italie)
  sd: "üáµüá∞", // Sindhi (Pakistan)
  se: "üá≥üá¥", // Same du Nord (Norv√®ge)
  sg: "üá®üá´", // Sango (R√©publique centrafricaine)
  si: "üá±üá∞", // Cingalais (Sri Lanka)
  sk: "üá∏üá∞", // Slovaque (Slovaquie)
  sl: "üá∏üáÆ", // Slov√®ne (Slov√©nie)
  sm: "üáºüá∏", // Samoan (Samoa)
  sn: "üáøüáº", // Shona (Zimbabwe)
  so: "üá∏üá¥", // Somali (Somalie)
  sq: "üá¶üá±", // Albanais (Albanie)
  sr: "üá∑üá∏", // Serbe (Serbie)
  ss: "üá∏üáø", // Swati (Eswatini)
  st: "üá±üá∏", // Sotho du Sud (Lesotho)
  su: "üáÆüá©", // Soundanais (Indon√©sie)
  sv: "üá∏üá™", // Su√©dois (Su√®de)
  sw: "üáπüáø", // Swahili (Tanzanie)
  ta: "üáÆüá≥", // Tamoul (Inde)
  te: "üáÆüá≥", // Telugu (Inde)
  tg: "üáπüáØ", // Tadjik (Tadjikistan)
  th: "üáπüá≠", // Tha√Ø (Tha√Ølande)
  ti: "üá™üá∑", // Tigrinya (√ârythr√©e)
  tk: "üáπüá≤", // Turkm√®ne (Turkm√©nistan)
  tl: "üáµüá≠", // Tagalog (Philippines)
  tn: "üáßüáº", // Tswana (Botswana)
  to: "üáπüá¥", // Tongien (Tonga)
  tr: "üáπüá∑", // Turc (Turquie)
  ts: "üáøüá¶", // Tsonga (Afrique du Sud)
  tt: "üá∑üá∫", // Tatar (Russie)
  tw: "üá¨üá≠", // Twi (Ghana)
  ty: "üáµüá´", // Tahitien (Polyn√©sie fran√ßaise)
  ug: "üá®üá≥", // Ou√Øghour (Chine)
  uk: "üá∫üá¶", // Ukrainien (Ukraine)
  ur: "üáµüá∞", // Ourdou (Pakistan)
  uz: "üá∫üáø", // Ouzbek (Ouzb√©kistan)
  ve: "üáøüá¶", // Venda (Afrique du Sud)
  vi: "üáªüá≥", // Vietnamien (Vietnam)
  vo: "üåç", // Volap√ºk (International)
  wa: "üáßüá™", // Wallon (Belgique)
  wo: "üá∏üá≥", // Wolof (S√©n√©gal)
  xh: "üáøüá¶", // Xhosa (Afrique du Sud)
  yi: "üáÆüá±", // Yiddish (Isra√´l)
  yo: "üá≥üá¨", // Yoruba (Nigeria)
  za: "üá®üá≥", // Zhuang (Chine)
  zh: "üá®üá≥", // Chinois (Chine)
  zu: "üáøüá¶", // Zoulou (Afrique du Sud)
};

export const LanguageSelector = () => {
  const t = useTranslations("LanguageSelector");
  const { lang, setLang } = useLanguageStore();
  const router = useRouter();
  const [isTriggered, setIsTriggered] = useState(false);

  return (
    <Select 
      onValueChange={(e: ISOLang) => {
        setLang(e);
        router.refresh();
      }}
      value={lang}
      open={isTriggered}
      onOpenChange={(e) => setIsTriggered(e)}
    >
      <SelectTrigger showArrow={false}>
        <SelectValue placeholder={t("Placeholder")}>
          {EmojiesByLang[lang]}
        </SelectValue>
      </SelectTrigger>
      <SelectContent>
        <SelectGroup>
          <SelectLabel>{t("Label")}</SelectLabel>
          <SelectItem value="en">English</SelectItem>
          <SelectItem value="fr">Fran√ßais</SelectItem>
        </SelectGroup>
      </SelectContent>
    </Select>
  );
}